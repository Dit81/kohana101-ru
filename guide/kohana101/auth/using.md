# Использование

[!!] В данной статье описаны только базовые возможности, общие для всех драйверов. Наиболее распространенный драйвер (`ORM`)
 имеет бОльшие возможности, которые описаны [отдельно](auth/orm/basic).

## Вход {#login}

Для входа необходимо вызывать метод `login`:

	Auth::instance()->login('username', 'password');

В качестве необязательного параметра выступает опция "запомнить пользователя":

	Auth::instance()->login('username', 'password', TRUE);

Если вход осуществлен успешно, на сервере создается специальный идентификатор (токен), который в дальнейшем позволяет
 связать посетителя с учетной записью на сервере.

[!!] Возможность "запоминания" реализована не во всех драйверах. Так, в [файловом драйвере](auth/file/basic) (единственный штатный драйвер
 в модуле **Auth**) этой возможности нет. А в [драйвере ORM](auth/orm/autologin) есть.

Метод `login` возвращает **TRUE** или **FALSE** в зависимости от успешности входа. После входа в сессии хранится объект с
 информацией о пользователе (зависит от типа [драйвера](auth/drivers)), имя переменной определяется параметром `session_key`
 в [конфигурационном файле](auth/config).

## Выход {#logout}

Закончить сеанс пользователя очень просто:

	Auth::instance()->logout();

Есть два необязательных параметра:

* `destroy` - требовать ли полную очистку сессии (по умолчанию **FALSE**). В противном случае будет удален объект пользователя,
 а сессия будет регенерирована (изменение `SESSID`).
* `logout_all` - удаление всех токенов ("запомненные" сессии) для текущего пользователя (по умолчанию **FALSE**).

[!!] Параметр `logout_all` часто неправильно понимают. Он не форсирует автоматическое завершение открытых сессий пользователя.
 Он всего лишь не даст в дальнейшем автоматически входить пользователям из других браузеров. Причем, что странно, - данная
 возможность имеется только если текущий пользователь имеет такой токен.

Метод возвращает успешность выхода. Если по каким-то причинам пользователь останется залогиненным, вернет **FALSE**.

## Проверка данных {#checking}

В любой момент времени можно проверить текущую пользовательскую сессию. Цели могут различаться.

	// получаем пользовательский объект или NULL для гостевой сессии
	$user = Auth::instance()->get_user();

Если пользователь авторизован, вернет его объект из сессии. Можно указать, какой результат вернуть в обратном случае:

	// для гостя вернет FALSE
	$user = Auth::instance()->get_user(FALSE);

Еще один полезный метод, позволяющий проверить факт аутентификации пользователя:

	if (Auth::instance()->logged_in()) {...}

Метод возвращает строго **TRUE**/**FALSE**. В метод можно передать роль (или массив ролей), чтобы проверить также наличие
 этих ролей у пользователя. Такую возможность поддерживает [драйвер ORM](auth/orm/basic). Драйвер File переданные роли
 проигнорирует.

